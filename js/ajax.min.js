!function(){"use strict";$=jQuery;var e=$(".js-pred-search").parents("form"),s=e.find(".pred-search__inner");function a(){s.fadeIn(Slate.transitions.speed),e.addClass("active")}function n(){s.fadeOut(Slate.transitions.speed)}function t(e,s,a){e.find("li").remove(),$.each(a,(function(a,n){e.append('<li class="'.concat(s,'">').concat(n,"</li>"))}))}function r(){var s=$(".js-pred-search");""!=s.val()&&(e.find("button").addClass("loading"),$.ajax({url:SlateAjax.ajax_admin_url,type:"post",data:{action:"predictive_search",search_query:s.val()},success:function(e){if(1==e.success){var s=e.data.posts,r=e.data.categories;s||r||n(),a(),s&&0!=s.length?($(".js-pred-search-products").show(),t($(".js-pred-search-products ul"),"simple-list__item",s)):$(".js-pred-search-products").hide(),r&&0!=r.length?($(".js-pred-search-categories").show(),t($(".js-pred-search-categories ul"),"simple-list__item simple-list__item--txt",r)):$(".js-pred-search-categories").hide()}0==e.success&&n()},error:function(e){n()},complete:function(){e.find("button").removeClass("loading")}}))}function i(e,s,a="Something went wrong, please contact us."){e.append('\n        <div class="ajax-form-response ajax-form-response--'.concat(s,'">\n            <p class="ajax-form-response__txt">\n                ').concat(a,"\n            </p>\n        </div>\n    "))}window.addEventListener("aag_init",(function(){var e;$(document).on("submit",'[data-ajax="newsletter-form"]',(function(e){e.preventDefault();var s=$(this),a=s.find("button");s.find(".ajax-form-response").remove(),a.addClass("loading").append(Slate.svgs.spinner),$.ajax({url:SlateAjax.ajax_admin_url,type:"post",data:{action:"aag_newsletter_signup",email:s.find('[name="email"]').val()},success:function(e){0!=e.success?i(s,"success",e.data.message):i(s,"error",e.data.message)},error:function(){i(s,"error")},complete:function(){a.removeClass("loading").find("svg:nth-child(2)").remove()}})})),e=null,$(".js-pred-search").on("keyup",(function(){clearTimeout(e),e=setTimeout(r,500)})),$(".js-pred-search").on("blur",(function(){setTimeout((function(){n()}),250)})),$(".js-pred-search").on("focus",(function(){s.find("li").length&&a()}))}))}();